<!DOCTYPE html>
<html>
<body>
    <h1>üîß –¢–µ—Å—Ç —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è —Å –ü–ö</h1>
    
    <button onclick="testConnection()">–¢–µ—Å—Ç –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è</button>
    <button onclick="sendSubscription()">–û—Ç–ø—Ä–∞–≤–∏—Ç—å –ø–æ–¥–ø–∏—Å–∫—É</button>
    
    <div id="status"></div>

    <script>
        const SERVER_URL = 'http://192.168.1.35:5000'; // –ó–ê–ú–ï–ù–ò –ù–ê –°–í–û–ô IP
        
        async function testConnection() {
            showStatus('üîÑ –ü—Ä–æ–≤–µ—Ä—è–µ–º —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–µ...');
            
            try {
                const response = await fetch(SERVER_URL + '/api/test', {
                    method: 'POST',
                    headers: {'Content-Type': 'application/json'},
                    body: JSON.stringify({test: "hello"})
                });
                
                const data = await response.json();
                showStatus('‚úÖ –°–ï–†–í–ï–† –†–ê–ë–û–¢–ê–ï–¢! –û—Ç–≤–µ—Ç: ' + data.message);
                console.log('‚úÖ –û—Ç–≤–µ—Ç —Å–µ—Ä–≤–µ—Ä–∞:', data);
            } catch (error) {
                showStatus('‚ùå –û–®–ò–ë–ö–ê: ' + error.message);
                console.error('‚ùå –û—à–∏–±–∫–∞:', error);
            }
        }
        
        async function sendSubscription() {
            showStatus('üîÑ –û—Ç–ø—Ä–∞–≤–ª—è–µ–º –ø–æ–¥–ø–∏—Å–∫—É...');
            
            // –¢–µ—Å—Ç–æ–≤–∞—è –ø–æ–¥–ø–∏—Å–∫–∞
            const testSubscription = {
                endpoint: 'https://fcm.googleapis.com/test-endpoint',
                keys: {
                    p256dh: 'test-key',
                    auth: 'test-auth'
                }
            };
            
            try {
                const response = await fetch(SERVER_URL + '/api/subscribe', {
                    method: 'POST',
                    headers: {'Content-Type': 'application/json'},
                    body: JSON.stringify(testSubscription)
                });
                
                showStatus('‚úÖ –ü–æ–¥–ø–∏—Å–∫–∞ –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω–∞!');
                console.log('‚úÖ –û—Ç–≤–µ—Ç:', await response.json());
            } catch (error) {
                showStatus('‚ùå –û—à–∏–±–∫–∞ –æ—Ç–ø—Ä–∞–≤–∫–∏: ' + error.message);
            }
        }
        
        function showStatus(message) {
            document.getElementById('status').innerHTML = message;
        }
        
        // –ê–≤—Ç–æ–ø—Ä–æ–≤–µ—Ä–∫–∞ –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ
        testConnection();
    </script>
</body>
</html>
